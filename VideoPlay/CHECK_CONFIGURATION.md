# 腾讯云开发配置自查指南 (Localhost调试必读)

您的项目正在本地 (`localhost:5173`) 尝试连接腾讯云开发数据库。如果遇到 `you can't request without auth` 错误，请严格按照以下步骤检查配置。

## 1. 检查 Web 安全域名 (最常见原因)

即使代码中已经写了登录逻辑，如果来源域名不在白名单中，**数据库请求会被拒绝**。

1.  登录 [腾讯云开发控制台](https://console.cloud.tencent.com/tcb)。
2.  进入您的环境 (`test-3goem7h983cb2f0e`)。
3.  左侧菜单选择 **安全配置** (或 "环境设置" -> "安全配置")。
4.  找到 **WEB安全域名** 区域。
5.  **必须**添加以下域名到白名单：
    *   `localhost:5173`
    *   `127.0.0.1:5173`
6.  添加后，等待 1-2 分钟生效，然后刷新页面。

## 2. 检查匿名登录开关

1.  在控制台左侧菜单选择 **登录授权**。
2.  找到 **匿名登录** 选项。
3.  确保状态为 **已开启**。

## 3. 检查数据库权限

1.  左侧菜单选择 **数据库**。
2.  点击 **WuHan** 集合。
3.  点击顶部的 **权限设置**。
4.  确保 "所有用户" (或 "访客") 的权限不是 "无权限"。
    *   推荐设置为：**所有用户可读，仅创建者及管理员可写**。

## 4. 检查环境 ID 和地域

1.  打开项目中的 `.env` 文件。
2.  确保 `VITE_TCB_ENV_ID` 是 `test-3goem7h983cb2f0e`。
3.  如果您的环境实际上不在上海地域，请告知开发助手修改代码中的 `region` 配置。

---
**调试技巧**：
打开浏览器控制台 (F12)，查看 Console 输出。
- 如果看到 `Anonymous login successful` 但紧接着报错 `without auth` -> **99% 是 Web 安全域名没配好**。
- 如果看到 `Authentication failed` -> 可能是 Env ID 错或匿名登录未开启。
